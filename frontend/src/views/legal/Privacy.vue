<template>
  <div class="min-h-screen bg-gray-50 py-12">
    <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8">
      <!-- Header -->
      <div class="text-center mb-12">
        <h1 class="text-4xl font-bold text-gray-900 mb-4">Datenschutzerkl√§rung</h1>
        <p class="text-lg text-gray-600">Informationen zur Verarbeitung Ihrer personenbezogenen Daten</p>
        <p class="text-sm text-gray-500 mt-2">Stand: {{ new Date().toLocaleDateString('de-DE') }}</p>
      </div>

      <!-- Content -->
      <div class="bg-white shadow-sm rounded-lg overflow-hidden">
        <div class="px-6 py-8">
          <!-- Einleitung -->
          <section class="mb-8">
            <h2 class="text-2xl font-semibold text-gray-900 mb-4">1. Datenschutz auf einen Blick</h2>
            
            <h3 class="text-lg font-medium text-gray-900 mb-3">Allgemeine Hinweise</h3>
            <div class="prose prose-gray max-w-none mb-6">
              <p class="text-gray-700 leading-relaxed">
                Die folgenden Hinweise geben einen einfachen √úberblick dar√ºber, was mit Ihren personenbezogenen 
                Daten passiert, wenn Sie diese Website besuchen. Personenbezogene Daten sind alle Daten, mit 
                denen Sie pers√∂nlich identifiziert werden k√∂nnen.
              </p>
            </div>

            <h3 class="text-lg font-medium text-gray-900 mb-3">Datenerfassung auf dieser Website</h3>
            <div class="prose prose-gray max-w-none">
              <p class="text-gray-700 leading-relaxed">
                <strong>Wer ist verantwortlich f√ºr die Datenerfassung auf dieser Website?</strong><br>
                Die Datenverarbeitung auf dieser Website erfolgt durch den Websitebetreiber. Dessen Kontaktdaten 
                k√∂nnen Sie dem Abschnitt ‚ÄûHinweis zur Verantwortlichen Stelle" in dieser Datenschutzerkl√§rung entnehmen.
              </p>
              <p class="text-gray-700 leading-relaxed">
                <strong>Wie erfassen wir Ihre Daten?</strong><br>
                Ihre Daten werden zum einen dadurch erhoben, dass Sie uns diese mitteilen. Hierbei kann es sich 
                z.B. um Daten handeln, die Sie in ein Kontaktformular eingeben oder bei der Registrierung angeben.
              </p>
            </div>
          </section>

          <!-- Verantwortliche Stelle -->
          <section class="mb-8">
            <h2 class="text-2xl font-semibold text-gray-900 mb-4">2. Verantwortliche Stelle</h2>
            <div class="prose prose-gray max-w-none">
              <p class="text-gray-700 leading-relaxed">
                Die verantwortliche Stelle f√ºr die Datenverarbeitung auf dieser Website ist:
              </p>
              <p class="text-gray-700 leading-relaxed">
                <strong>{{ brandingData.company_name || 'ChiliView GmbH' }}</strong><br>
                {{ brandingData.address || 'Musterstra√üe 123' }}<br>
                {{ brandingData.postal_code || '12345' }} {{ brandingData.city || 'Musterstadt' }}<br>
                <br>
                Telefon: {{ brandingData.phone || '+49 (0) 123 456789' }}<br>
                E-Mail: 
                <a :href="`mailto:${brandingData.email || 'info@chiliview.com'}`" 
                   class="text-blue-600 hover:text-blue-800">
                  {{ brandingData.email || 'info@chiliview.com' }}
                </a>
              </p>
              <p class="text-gray-700 leading-relaxed">
                Verantwortliche Stelle ist die nat√ºrliche oder juristische Person, die allein oder gemeinsam 
                mit anderen √ºber die Zwecke und Mittel der Verarbeitung von personenbezogenen Daten entscheidet.
              </p>
            </div>
          </section>

          <!-- Datenschutzbeauftragter -->
          <section class="mb-8">
            <h2 class="text-2xl font-semibold text-gray-900 mb-4">3. Datenschutzbeauftragter</h2>
            <div class="prose prose-gray max-w-none">
              <p class="text-gray-700 leading-relaxed">
                Wir haben einen Datenschutzbeauftragten bestellt:
              </p>
              <p class="text-gray-700 leading-relaxed">
                {{ brandingData.dpo_name || 'Max Mustermann' }}<br>
                {{ brandingData.dpo_address || brandingData.address || 'Musterstra√üe 123' }}<br>
                {{ brandingData.postal_code || '12345' }} {{ brandingData.city || 'Musterstadt' }}<br>
                <br>
                Telefon: {{ brandingData.dpo_phone || brandingData.phone || '+49 (0) 123 456789' }}<br>
                E-Mail: 
                <a :href="`mailto:${brandingData.dpo_email || 'datenschutz@chiliview.com'}`" 
                   class="text-blue-600 hover:text-blue-800">
                  {{ brandingData.dpo_email || 'datenschutz@chiliview.com' }}
                </a>
              </p>
            </div>
          </section>

          <!-- Datenverarbeitung -->
          <section class="mb-8">
            <h2 class="text-2xl font-semibold text-gray-900 mb-4">4. Datenverarbeitung auf dieser Website</h2>
            
            <h3 class="text-lg font-medium text-gray-900 mb-3">Cookies</h3>
            <div class="prose prose-gray max-w-none mb-6">
              <p class="text-gray-700 leading-relaxed">
                Unsere Internetseiten verwenden so genannte ‚ÄûCookies". Cookies sind kleine Datenpakete und 
                richten auf Ihrem Endger√§t keinen Schaden an. Sie werden entweder vor√ºbergehend f√ºr die 
                Dauer einer Sitzung (Session-Cookies) oder dauerhaft (permanente Cookies) auf Ihrem Endger√§t 
                gespeichert.
              </p>
              <p class="text-gray-700 leading-relaxed">
                <strong>Technisch notwendige Cookies:</strong> Diese Cookies sind f√ºr die Grundfunktionen 
                der Website erforderlich und k√∂nnen nicht deaktiviert werden. Sie speichern keine 
                personenbezogenen Daten.
              </p>
              <p class="text-gray-700 leading-relaxed">
                <strong>Funktionale Cookies:</strong> Diese Cookies erm√∂glichen erweiterte Funktionen 
                und Personalisierung. Sie k√∂nnen von uns oder von Drittanbietern gesetzt werden.
              </p>
            </div>

            <h3 class="text-lg font-medium text-gray-900 mb-3">Server-Log-Dateien</h3>
            <div class="prose prose-gray max-w-none mb-6">
              <p class="text-gray-700 leading-relaxed">
                Der Provider der Seiten erhebt und speichert automatisch Informationen in so genannten 
                Server-Log-Dateien, die Ihr Browser automatisch an uns √ºbermittelt:
              </p>
              <ul class="list-disc list-inside text-gray-700 leading-relaxed ml-4">
                <li>Browsertyp und Browserversion</li>
                <li>Verwendetes Betriebssystem</li>
                <li>Referrer URL</li>
                <li>Hostname des zugreifenden Rechners</li>
                <li>Uhrzeit der Serveranfrage</li>
                <li>IP-Adresse</li>
              </ul>
              <p class="text-gray-700 leading-relaxed">
                Diese Daten werden nicht mit anderen Datenquellen zusammengef√ºhrt. Die Erfassung dieser 
                Daten erfolgt auf Grundlage von Art. 6 Abs. 1 lit. f DSGVO.
              </p>
            </div>

            <h3 class="text-lg font-medium text-gray-900 mb-3">Registrierung auf dieser Website</h3>
            <div class="prose prose-gray max-w-none">
              <p class="text-gray-700 leading-relaxed">
                Sie k√∂nnen sich auf dieser Website registrieren, um zus√§tzliche Funktionen zu nutzen. 
                Die dazu eingegebenen Daten verwenden wir nur zum Zwecke der Nutzung des jeweiligen 
                Angebotes oder Dienstes, f√ºr den Sie sich registriert haben.
              </p>
              <p class="text-gray-700 leading-relaxed">
                <strong>Verarbeitete Daten bei der Registrierung:</strong>
              </p>
              <ul class="list-disc list-inside text-gray-700 leading-relaxed ml-4">
                <li>Benutzername</li>
                <li>E-Mail-Adresse</li>
                <li>Vollst√§ndiger Name</li>
                <li>Passwort (verschl√ºsselt gespeichert)</li>
                <li>Registrierungsdatum</li>
                <li>IP-Adresse zum Zeitpunkt der Registrierung</li>
              </ul>
            </div>
          </section>

          <!-- 3D-Modell Upload -->
          <section class="mb-8">
            <h2 class="text-2xl font-semibold text-gray-900 mb-4">5. 3D-Modell Upload und Verarbeitung</h2>
            <div class="prose prose-gray max-w-none">
              <p class="text-gray-700 leading-relaxed">
                <strong>Zweck der Datenverarbeitung:</strong><br>
                Wenn Sie Bilder f√ºr die 3D-Modellierung hochladen, verarbeiten wir diese Daten ausschlie√ülich 
                zum Zweck der Erstellung von 3D-Modellen mittels Photogrammetrie-Verfahren.
              </p>
              <p class="text-gray-700 leading-relaxed">
                <strong>Verarbeitete Daten:</strong>
              </p>
              <ul class="list-disc list-inside text-gray-700 leading-relaxed ml-4">
                <li>Hochgeladene Bilddateien</li>
                <li>EXIF-Daten der Bilder (GPS-Koordinaten, Kameraeinstellungen)</li>
                <li>Generierte 3D-Modelle und Punktwolken</li>
                <li>Verarbeitungsprotokoll und Metadaten</li>
              </ul>
              <p class="text-gray-700 leading-relaxed">
                <strong>Speicherdauer:</strong> Ihre Projektdaten werden f√ºr die Dauer Ihres Accounts 
                gespeichert. Sie k√∂nnen jederzeit einzelne Projekte oder Ihren gesamten Account l√∂schen.
              </p>
              <p class="text-gray-700 leading-relaxed">
                <strong>Rechtsgrundlage:</strong> Art. 6 Abs. 1 lit. b DSGVO (Vertragserf√ºllung)
              </p>
            </div>
          </section>

          <!-- Ihre Rechte -->
          <section class="mb-8">
            <h2 class="text-2xl font-semibold text-gray-900 mb-4">6. Ihre Rechte</h2>
            <div class="prose prose-gray max-w-none">
              <p class="text-gray-700 leading-relaxed">
                Sie haben gegen√ºber uns folgende Rechte hinsichtlich der Sie betreffenden personenbezogenen Daten:
              </p>
              <ul class="list-disc list-inside text-gray-700 leading-relaxed ml-4">
                <li><strong>Recht auf Auskunft</strong> (Art. 15 DSGVO)</li>
                <li><strong>Recht auf Berichtigung</strong> (Art. 16 DSGVO)</li>
                <li><strong>Recht auf L√∂schung</strong> (Art. 17 DSGVO)</li>
                <li><strong>Recht auf Einschr√§nkung der Verarbeitung</strong> (Art. 18 DSGVO)</li>
                <li><strong>Recht auf Daten√ºbertragbarkeit</strong> (Art. 20 DSGVO)</li>
                <li><strong>Widerspruchsrecht</strong> (Art. 21 DSGVO)</li>
                <li><strong>Recht auf Beschwerde bei einer Aufsichtsbeh√∂rde</strong> (Art. 77 DSGVO)</li>
              </ul>
              <p class="text-gray-700 leading-relaxed">
                <strong>Widerruf von Einwilligungen:</strong> Sofern die Verarbeitung der personenbezogenen 
                Daten auf einer erteilten Einwilligung beruht, haben Sie jederzeit das Recht, die Einwilligung 
                zu widerrufen. Durch den Widerruf der Einwilligung wird die Rechtm√§√üigkeit der aufgrund der 
                Einwilligung bis zum Widerruf erfolgten Verarbeitung nicht ber√ºhrt.
              </p>
            </div>
          </section>

          <!-- Datensicherheit -->
          <section class="mb-8">
            <h2 class="text-2xl font-semibold text-gray-900 mb-4">7. Datensicherheit</h2>
            <div class="prose prose-gray max-w-none">
              <p class="text-gray-700 leading-relaxed">
                Wir verwenden innerhalb des Website-Besuchs das verbreitete SSL-Verfahren (Secure Socket Layer) 
                in Verbindung mit der jeweils h√∂chsten Verschl√ºsselungsstufe, die von Ihrem Browser unterst√ºtzt wird.
              </p>
              <p class="text-gray-700 leading-relaxed">
                <strong>Technische und organisatorische Ma√ünahmen:</strong>
              </p>
              <ul class="list-disc list-inside text-gray-700 leading-relaxed ml-4">
                <li>Verschl√ºsselung der Daten√ºbertragung (HTTPS/TLS)</li>
                <li>Verschl√ºsselte Speicherung von Passw√∂rtern</li>
                <li>Regelm√§√üige Sicherheitsupdates</li>
                <li>Zugriffskontrolle und Berechtigungsmanagement</li>
                <li>Regelm√§√üige Datensicherungen</li>
                <li>Protokollierung von Systemzugriffen</li>
              </ul>
            </div>
          </section>

          <!-- Daten√ºbertragung -->
          <section class="mb-8">
            <h2 class="text-2xl font-semibold text-gray-900 mb-4">8. Daten√ºbertragung in Drittl√§nder</h2>
            <div class="prose prose-gray max-w-none">
              <p class="text-gray-700 leading-relaxed">
                Eine √úbertragung Ihrer personenbezogenen Daten in Drittl√§nder (L√§nder au√üerhalb des 
                Europ√§ischen Wirtschaftsraums) findet grunds√§tzlich nicht statt. Sollte dies in Einzelf√§llen 
                erforderlich sein, erfolgt dies nur bei Vorliegen einer Einwilligung oder auf Grundlage 
                angemessener Garantien im Sinne der Art. 44 ff. DSGVO.
              </p>
            </div>
          </section>

          <!-- Aufbewahrungsfristen -->
          <section class="mb-8">
            <h2 class="text-2xl font-semibold text-gray-900 mb-4">9. Aufbewahrungsfristen</h2>
            <div class="prose prose-gray max-w-none">
              <p class="text-gray-700 leading-relaxed">
                Personenbezogene Daten werden nur so lange gespeichert, wie es f√ºr den jeweiligen Zweck 
                erforderlich ist oder gesetzliche Aufbewahrungsfristen bestehen:
              </p>
              <ul class="list-disc list-inside text-gray-700 leading-relaxed ml-4">
                <li><strong>Account-Daten:</strong> Bis zur L√∂schung des Accounts</li>
                <li><strong>Projektdaten:</strong> Bis zur manuellen L√∂schung durch den Nutzer</li>
                <li><strong>Log-Dateien:</strong> Maximal 30 Tage</li>
                <li><strong>Backup-Daten:</strong> Maximal 90 Tage</li>
                <li><strong>Rechnungsdaten:</strong> 10 Jahre (¬ß 147 AO)</li>
              </ul>
            </div>
          </section>

          <!-- √Ñnderungen -->
          <section class="mb-8">
            <h2 class="text-2xl font-semibold text-gray-900 mb-4">10. √Ñnderungen dieser Datenschutzerkl√§rung</h2>
            <div class="prose prose-gray max-w-none">
              <p class="text-gray-700 leading-relaxed">
                Wir behalten uns vor, diese Datenschutzerkl√§rung anzupassen, damit sie stets den aktuellen 
                rechtlichen Anforderungen entspricht oder um √Ñnderungen unserer Leistungen in der 
                Datenschutzerkl√§rung umzusetzen. F√ºr Ihren erneuten Besuch gilt dann die neue Datenschutzerkl√§rung.
              </p>
            </div>
          </section>

          <!-- Kontakt -->
          <section class="mb-8">
            <h2 class="text-2xl font-semibold text-gray-900 mb-4">11. Fragen zum Datenschutz</h2>
            <div class="prose prose-gray max-w-none">
              <p class="text-gray-700 leading-relaxed">
                Wenn Sie Fragen zum Datenschutz haben, schreiben Sie uns bitte eine E-Mail oder wenden Sie 
                sich direkt an die f√ºr den Datenschutz verantwortliche Person in unserer Organisation:
              </p>
              <p class="text-gray-700 leading-relaxed">
                <strong>Datenschutzbeauftragter:</strong><br>
                E-Mail: 
                <a :href="`mailto:${brandingData.dpo_email || 'datenschutz@chiliview.com'}`" 
                   class="text-blue-600 hover:text-blue-800">
                  {{ brandingData.dpo_email || 'datenschutz@chiliview.com' }}
                </a>
              </p>
            </div>
          </section>
        </div>
      </div>

      <!-- Footer Navigation -->
      <div class="mt-12 text-center">
        <div class="flex flex-wrap justify-center gap-6 text-sm text-gray-600">
          <router-link to="/imprint" class="hover:text-gray-900">Impressum</router-link>
          <router-link to="/terms" class="hover:text-gray-900">AGB</router-link>
          <router-link to="/" class="hover:text-gray-900">Zur√ºck zur Startseite</router-link>
        </div>
      </div>
    </div>
  </div>
</template>

<script>
import { ref, onMounted } from 'vue'
import { useBrandingService } from '@/services/branding'

export default {
  name: 'Privacy',
  setup() {
    const brandingData = ref({})
    const { loadBranding } = useBrandingService()

    onMounted(async () => {
      // üé® Branding-Daten laden falls verf√ºgbar
      try {
        const branding = await loadBranding()
        brandingData.value = branding || {}
      } catch (error) {
        console.warn('Branding-Daten konnten nicht geladen werden:', error)
        brandingData.value = {}
      }
    })

    return {
      brandingData
    }
  }
}
</script>

<style scoped>
.prose {
  max-width: none;
}

.prose p {
  margin-bottom: 1rem;
}

.prose ul {
  margin-bottom: 1rem;
}

.prose li {
  margin-bottom: 0.5rem;
}

.prose a {
  text-decoration: underline;
}

.prose a:hover {
  text-decoration: none;
}
</style>